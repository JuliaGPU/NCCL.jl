This is roughly based on the CUDA.jl wrapper generator.
